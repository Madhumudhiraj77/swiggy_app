import{r as a,j as e,o as R,p as I,g as N,q as A,F as b,s as v,O as y,L as _,h as w,A as k}from"./index-ckQCI9xy.js";const T=(i,t=500)=>{const[o,r]=a.useState(i);return a.useEffect(()=>{const n=setTimeout(()=>{r(i)},t);return()=>{clearTimeout(n)}},[i,t]),o},U=({setTextInput:i})=>{var x,c;const[t,o]=a.useState([]);a.useEffect(()=>{(async()=>{var S;try{let u=await fetch(I);if(!u.ok)throw new Error("Error fetching search results data");const m=await u.json();o(((S=m==null?void 0:m.data)==null?void 0:S.cards)||[])}catch(u){console.log("Error while fetching search results",u)}})()},[]);const{header:r,imageGridCards:n}=((c=(x=t[1])==null?void 0:x.card)==null?void 0:c.card)||{},h=n==null?void 0:n.info,f=(r==null?void 0:r.title)||"Popular Cuisines";console.log("cuisinesCarosal",t);const E=l=>{i(l)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold mt-4",children:f}),e.jsx("div",{className:"flex w-full ",style:{overflow:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:h==null?void 0:h.map(l=>e.jsx("div",{className:" shrink-0 ",onClick:()=>E(l.action.link.slice(23)),children:e.jsx("img",{className:"w-[100px] h-auto object-cover mx-2",src:R+l.imageId})},l.id))})]})},L=()=>{const i=N(),[t,o]=a.useState(""),[r,n]=a.useState([]),[h,f]=a.useState(!0),[E,x]=a.useState(!1),c=T(t.trim(),500);console.log("debouncedTextInput",c.length),a.useEffect(()=>{c&&c.length>1?l(c):n([])},[c]);const l=async s=>{var g,j;try{let p=await fetch(A+s);if(!p.ok)throw new Error("Error fetching search suggestions results data");const d=await p.json();console.log("suggestionsJsonData",(g=d==null?void 0:d.data)==null?void 0:g.suggestions),n(((j=d==null?void 0:d.data)==null?void 0:j.suggestions)||[])}catch(p){console.log("Error while fetching search suggestions results data",p)}},S=s=>{o(s.target.value)},u=()=>{o(""),i(w.SEARCH)},m=s=>{o(s),n([]),f(!1),x(!0)},C=()=>{f(!0),x(!1)};return e.jsxs("div",{className:"w-11/12 md:w-9/12 lg:w-7/12 mx-auto mt-6",children:[e.jsxs("div",{className:"flex my-15 items-center border border-gray-400 rounded-xl",children:[e.jsx("input",{className:"w-full p-3 font-medium border-none outline-none",type:"text",placeholder:"Search for restaurants and food","aria-label":"Search for restaurants and food",value:t,onChange:S,onFocus:C}),e.jsx("button",{className:"p-3",onClick:u,children:t.length===0?e.jsx(b,{size:24,className:"text-gray-600"}):e.jsx(v,{size:24,className:"text-gray-600"})})]}),t.length===0&&e.jsx(U,{setTextInput:o}),E&&e.jsx(y,{}),h&&e.jsx("div",{children:r.length>0&&r.map((s,g)=>e.jsx(_,{to:`${w.SEARCH_RESTAURANT_DETAILS}?query=${encodeURIComponent(s.text)}`,onClick:()=>m(s.text),children:e.jsxs("div",{className:"w-full flex items-center gap-3 my-2  py-2 hover:bg-[#f2f6fc]",children:[e.jsx("img",{src:k+s.cloudinaryId,className:"w-[70px] h-[70px] object-cover rounded-md",alt:"resImage"}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-medium text-lg",children:s.text}),e.jsx("p",{className:"font-medium text-[#686b78] text-sm",children:s.type})]})]})},g))})]})};export{L as default};
